<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Ingesta Batch - Tienda Alpaca DW</title>

    <!-- Librer√≠as externas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- Estilos -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü¶ô Sistema de Ingesta Batch</h1>
            <p>Data Warehouse - Tienda de Trajes de Alpaca Per√∫</p>
        </div>

        <div class="main-content">
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-icon">üìÅ</div>
                    <h3>Subir Archivo de Datos</h3>
                    <p>Arrastra y suelta tu archivo CSV o Excel aqu√≠, o haz clic para seleccionar</p>
                    <input type="file" id="fileInput" class="file-input" accept=".csv,.xlsx,.xls" />
                    <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                        Seleccionar Archivo
                    </button>
                </div>

                <div class="table-selector">
                    <label for="tableSelect"><strong>Seleccionar Tabla Destino:</strong></label>
                    <select id="tableSelect">
                        <option value="">-- Selecciona una tabla --</option>
                        <option value="dim_clientes">Dimensi√≥n Clientes</option>
                        <option value="dim_productos">Dimensi√≥n Productos</option>
                        <option value="dim_empleados">Dimensi√≥n Empleados</option>
                        <option value="fact_ventas">Tabla de Hechos - Ventas</option>
                    </select>
                </div>

                <div style="text-align: center;">
                    <button class="process-btn" id="processBtn" onclick="processFile()" disabled>
                        üöÄ Procesar Datos
                    </button>
                    <button class="process-btn" onclick="clearData()" 
                        style="background: linear-gradient(135deg, #e53e3e 0%, #c53030 100%); 
                               box-shadow: 0 5px 15px rgba(229, 62, 62, 0.3);">
                        üóëÔ∏è Limpiar
                    </button>
                </div>

                <div class="progress-bar" id="progressContainer" style="display: none;">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <div id="statusMessages"></div>

            <div class="stats-grid" id="statsGrid" style="display: none;">
                <div class="stat-card">
                    <div class="stat-value" id="totalRows">0</div>
                    <div class="stat-label">Filas Procesadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="validRows">0</div>
                    <div class="stat-label">Registros V√°lidos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="errorRows">0</div>
                    <div class="stat-label">Errores</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="processingTime">0s</div>
                    <div class="stat-label">Tiempo de Proceso</div>
                </div>
            </div>

            <div class="preview-section" id="previewSection" style="display: none;">
                <h3>Vista Previa de Datos</h3>
                <div id="previewContent"></div>
            </div>
        </div>
    </div>

    <!-- Script externo -->
    <script src="script.js"></script>
</body>
</html>
